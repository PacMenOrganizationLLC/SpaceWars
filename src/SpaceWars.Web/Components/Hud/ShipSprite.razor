@using SpaceWars.Logic

<div style="@($"position:absolute; left: {X}px; top: {Y}px; transform: translate(18%, -10%);")">
    <div class="text-truncate small text-white" style="width: 150%">@Player.Name</div>
    <div class="progress bg-success rounded-0" style="height: 3px;">
        <div class="progress-bar bg-dark" role="progressbar" style="width: @(100-Player.Ship.Health)%"
            aria-valuenow="@(100-Player.Ship.Health)" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
    <div class="position-relative"
        <img src="@GetShipSvg()" alt="" height="80" width="80" style="@($"rotate: {Heading}deg;")">
        <svg width="150" height="150" style="position: absolute; top: -36px; left: -36px; opacity: @(Player.Ship.Shield / 2)%;">
            <circle cx="75" cy="75" r="40" fill="blue" /> <!-- Adjust attributes as needed -->
        </svg>
    </div>
</div>

@code {
    private Random _random = new Random();
    [Parameter, EditorRequired] public int Heading  {get; set;}
    [Parameter, EditorRequired] public int X  {get; set;}
    [Parameter, EditorRequired] public int Y  {get; set;}
    [Parameter, EditorRequired] public Player Player {get; set;}
    [Parameter, EditorRequired] public GameMap Map {get; set;}


   private string GetShipSvg()
   {
       int totalNumberOfShips = 18;
       int shipNumber = (Math.Abs(Player.Name.GetHashCode()) % totalNumberOfShips) + 1;
       return $"Ships/svg/{shipNumber}.svg";
   }

}
